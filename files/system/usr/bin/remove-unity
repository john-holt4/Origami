#!/usr/bin/env bash
# origami-uninstall-unity
# cleanly removes the Unity3D distrobox

set -e

BOX_NAME="unity-box"

echo "Unfolding (Uninstalling) Unity environment..."

# 1. Check if the box exists
if distrobox list | grep -q "$BOX_NAME"; then

    # 2. Stop the container
    echo "Stopping container..."
    distrobox stop "$BOX_NAME" --yes

    # 3. Delete the container
    # Distrobox automatically removes the exported desktop icons during this step
    echo "Deleting container..."
    distrobox rm "$BOX_NAME" --yes
    
    echo "Unity environment removed successfully."
    echo "(Note: Your project files in ~/ are untouched)"

else
    echo "Unity environment ('$BOX_NAME') not found. Nothing to do."
fi